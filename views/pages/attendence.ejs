<script src="https://cdnjs.cloudflare.com/ajax/libs/html5-qrcode/2.3.4/html5-qrcode.min.js"
    integrity="sha512-k/KAe4Yff9EUdYI5/IAHlwUswqeipP+Cp5qnrsUjTPCgl51La2/JhyyjNciztD7mWNKLSXci48m7cctATKfLlQ=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<head>
    <link rel="stylesheet" href="	https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="/assets/style.css">

</head>
<style>
    .main {
        display: flex;
        justify-content: center;
        align-items: center;
    }

    #reader__scan_region>img {
        width: 100px;
        margin: 1rem 0;
    }

    #reader__scan_region>img:hover {
        scale: 1.3;
        transition: all 400ms ease;

    }

    #reader {
        width: 600px;
        border-bottom-left-radius: 1rem;
        border-bottom-right-radius: 1rem;
    }

    #result {
        text-align: center;
        font-size: 1.5rem;
    }



    #html5-qrcode-button-camera-start,
    #html5-qrcode-button-camera-stop {
        background-color: #4db5ff;
        color: #1f1f38;
        width: 200px;
        border-radius: 0.7rem;
        cursor: pointer;
        margin: 1rem 0;
        padding: 0.4rem;
        font-size: medium;
    }

    #html5-qrcode-button-camera-start:hover,
    #html5-qrcode-button-camera-stop:hover {
        background-color: #1f1f38;
        border: 1px solid white;
        border-radius: 0.5rem;
        color: white;
        transition: all 400ms ease;
    }

    #html5-qrcode-anchor-scan-type-change {
        text-decoration: none;
        color: white
    }

    h4 {
        color: white;
    }

    a {
        text-decoration: none;
    }

    #gps {
        width: 200px;
    }
</style>


<div class="flr">

    <div class='sidebar pto'>
        <h6 class='heading'>MAIN :</h6>
        <div class='flc'>
          <a href="/dashboard" onclick="selectDiv(this)" class="activee">
            <div class='flr'>
              <img class='icon' src='' alt></img>
              <h5>Dashboard</h5>
            </div>
          </a>
          <a href="/dashboard/details" onclick="selectDiv(this)" class="activee">
            <div class='flr'>
              <img class='icon' src='' alt></img>
              <h5>Details</h5>
            </div>
          </a>
        </div>
        <h6 class='heading'>INFORMATION :</h6>
        <div class='flc'>
          <a href="" class="activee"  onclick="selectDiv(this)">
            <div class='flr'>
              <img class='icon' src='' alt></img>
              <h5>Check Status</h5>
            </div>
          </a>
          <a href="" class="activee"  onclick="selectDiv(this)">
            <div class='flr'>
              <img class='icon' src='' alt></img>
              <h5>Alert</h5>
            </div>
          </a>
          <a href="/dashboard/attendence"   onclick="selectDiv(this)" class="activee select">
            <div class='flr'>
              <img class='icon' src='' alt></img>
              <h5 class="select">My Attendence</h5>
            </div>
          </a>
          <a href="" class="activee"  onclick="selectDiv(this)">
            <div class='flr'>
              <img class='icon' src='' alt></img>
              <h5>Help / Support</h5>
            </div>
          </a>
        </div>
      </div>

        <div class="wifull">
            <div class="main">
                <div id="reader"></div>
                <div id="result"></div>
            </div>
        </div>
</div>

<script>


    const scanner = new Html5QrcodeScanner('reader', {
        qrbox: {
            width: 350,
            height: 550,
        },
        fps: 20,
    });


    scanner.render(success, error);

    function success(result) {

        document.getElementById('result').innerHTML = `
        <br><br>
        <center><h2>Success!</h2></center>
        <br>
        <p><a id='details_bus' href="${result}">${result}</a></p>       
        <br>
        <h4>Your Today's Attendence has been registered</h4>
        <br>        
        <form method="post" action='attendence'>
          
         <center> <button id="gps" type="submit"> Save Changes </button> </center>
        </form>
        `;





        scanner.clear();
        document.getElementById('reader').remove();

    }

    function error(err) {
        console.error(err);
    }

</script>